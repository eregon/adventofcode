p$<.map(&:split).sort_by{|h,|[(s=(t=(h=h.tr'AKQJT','EDCBA').chars.tally.values).size)*-2-(t.max-6+s).abs,*h]}.zip(1..).sum{_1[-1].to_i*_2}