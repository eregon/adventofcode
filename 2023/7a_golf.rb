p$<.map(&:split).sort_by{|h,|[(5-s=(t=(h=(h.tr'AKQJT','EDCBA').chars).tally.values).size)*2+(t.max==6-s ?1:0),*h]}.zip(1..).sum{_1[-1].to_i*_2}